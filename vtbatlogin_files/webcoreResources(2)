(function($, oldDomManip) {
	// Override the core domManip function
	$.fn.domManip = function() {

		function evalScript(i, elem) {
			jQuery.globalEval(elem.text || elem.textContent || elem.innerHTML || "");
		}

		var scripts = [];
		// let jQuery build the fragments
		var results = jQuery.buildFragment(arguments[0], this, scripts);
		// change parameter to created fragments
		arguments[0] = results.fragment.childNodes;
		// do what jQuery will do - without scripts
		oldDomManip.apply(this, arguments);
		if (scripts.length) {
			// if connection is active
			if (jQuery.active != 0) {
				$(this).bind("ajaxStop.scriptCache", function() {
					$.each(scripts, evalScript);
					$(this).unbind("ajaxStop.scriptCache");
				});
			} else
				$.each(scripts, evalScript);
		}
		return this;
	};
})(jQuery, jQuery.fn.domManip);